\chapter{Einleitung}
\index{Distribution}
Zur fehlerfreien Verwendung der \TUDScript-Klassen der Version~\vTUDScript{} 
werden sowohl die \KOMAScript"=Klassen~\vKOMAScript{} oder später als auch die 
beiden Hausschriften des \CDs \Univers und \DIN zwingend benötigt. Außerdem 
müssen weitere Pakete durch die genutzte \hologo{LaTeX}"=Distribution 
bereitgestellt werden. 

Bei den aktuellen Distributionen \Distribution{\hologo{TeX}~Live}[2014], 
\Distribution{Mac\hologo{TeX}}[2014] und \Distribution{\hologo{MiKTeX}}[2.9] 
ist das mit großer Sicherheit kein Problem. Nutzen Sie jedoch eine ältere 
Distribution, könnte dies zu Problemen führen. Dann sollte bestenfalls eine der 
aktuellen Distributionen installiert werden. Ist dies nicht möglich, müssen die 
unter \autoref{sec:packages:needed} aufgeführten Pakete sowie \TUDScript 
(\autoref{sec:local:install}) in der jeweils benötigten Version lokal 
installiert werden.

Das Vorlagenpaket von Klaus Bergmann ist für die Verwendung nicht notwendig. 
Allerdings beinhaltet dieses weitere Klassen zum Erstellen von Folien 
und Briefen.%
\footnote{%
  \Class{tudbook}, \Class{tudbeamer}, \Class{tudletter}, \Class{tudfax}, 
  \Class{tudhaus}, \Class{tudform}
}
Das \TUDScript"=Bundle ist hauptsächlich für das Erstellen wissenschaftlicher 
Texte und Arbeiten gedacht und soll die ursprünglichen Vorlagen \emph{momentan} 
nicht ersetzen sondern vielmehr ergänzen. 

Eine Umsetzung des \CDs für die \Class{beamer}"=Klasse sowie für Briefe und 
Geschäftsschreiben auf Basis der \KOMAScript"=Brief"=Klasse \Class{scrlttr2} 
ist bis jetzt leider noch nicht entstanden, soll jedoch langfristig 
bereitgestellt werden. Allerdings existieren bereits im Bundle 
\Class{tudmathposter} für die \Class{beamer}"=Klasse mehrere Stile. Dieses 
Bundle ist sowohl bei \hrfn{https://github.com/tud-cd/tud-cd}{GitHub} als 
auch auf der \hrfn{http://tu-dresden.de/service/publizieren/cd/4_latex} 
{\hologo{LaTeX}-Seite der \TnUD} zu finden.



\section{Zur Verwendung dieses Handbuchs}
Sämtliche neu definierten Optionen, Umgebungen und Befehle der 
\TUDScript-Klassen und \TUDScript-Pakete werden im Handbuch aufgeführt und 
beschrieben. Am Ende des Dokumentes befinden sich mehrere Indizes, die das 
Nachschlagen oder Auffinden von bisher unbekannten Befehlen oder Optionen 
erleichtern sollen.

Die folgend beschriebenen Optionen können~-- wie ein Großteil der Einstellungen 
der \KOMAScript"=Klassen~-- in der Syntax des \Package{keyval}"=Paketes als 
Schlüssel"=Wert"=Paare bei der Wahl der Dokumentklasse angegeben werden:
\Macro*{documentclass}\POParameter{\PName{Schlüssel}\PValue{=}\PName{Wert}}%
\Parameter{Klasse}.

Des Weiteren eröffnen die \KOMAScript"=Klassen die Möglichkeit der späten 
Optionenwahl. Damit können Optionen nicht nur direkt beim Laden als sogenannte 
Klassenoptionen angegeben werden, sondern lassen sich auch noch innerhalb des 
Dokumentes nach dem Laden der Klasse ändern. Die \KOMAScript"=Klassen sehen 
hierfür zwei Befehle vor. Mit \Macro{KOMAoptions}\Parameter{Optionenliste}
kann man beliebig vielen Schlüsseln jeweils genau einen Wert zuweisen, 
\Macro{KOMAoption}\Parameter{Option}\Parameter{Werteliste} erlaubt das 
gleichzeitige Setzen mehrere Werte für genau einen Schlüssel. Äquivalent 
dazu werden für die \emph{zusätzlichen} Optionen der \TUDScript-Klassen mit 
die Befehle \Macro{TUDoptions}\Parameter{Optionenliste} und 
\Macro{TUDoption}\Parameter{Option}\Parameter{Werteliste} definiert. Damit kann
das Verhalten von Optionen im Dokument~-- innerhalb einer Gruppe auch lokal~-- 
geändert werden.

Die Voreinstellung einer jeden Option ist durch \PValue{preset:\,}\PName{Wert}
bei deren Beschreibung angegeben. Einige dieser Standardwerte sind nicht 
immer gleich sondern werden zusätzlich in Abhängigkeit der genutzten Optionen 
und Benutzereinstellungen gesetzt. Diese bedingten Voreinstellungen werden durch
\PValue{preset:\,}\PName{Wert}\PValue{\,|\,}\PName{Bedingung}\PValue{:\,}%
\PName{bedingter~Wert} angegeben.

Jedem Schlüssel wird normalerweise durch den Benutzer ein gewünschter, gültiger 
Wert zugewiesen. Wird ein Schlüssel jedoch ohne Wertzuweisung genutzt, so 
wird~-- falls vorhanden~-- ein vordefinierter Säumniswert gesetzt, welcher in 
der Beschreibung der einzelnen Optionen durch die \PValue{\emph{kursive}} 
Schreibweise gekennzeichnet ist. In den allermeisten Fällen ist der Säumniswert
eines Schlüssels \PValue{true}, er entspricht folglich der Angabe 
\PName{Schlüssel}\PValue{=true}. Mit der expliziten Wertzuweisung 
eines Schlüssels durch den Benutzer werden immer sowohl normale als auch 
bedingte Voreinstellungen überschrieben. Die neben den Optionen neu 
eingeführten Befehle und Umgebungen der Klassen werden im gleichen Stil 
erläutert.



\section{Installation des \TUDScript-Bundles}
\label{sec:install}%
\index{Installation}\index{Update}%
%
\ChangedAt{%
  v2.01!\TUDScript-Bundle auf CTAN veröffentlicht,%
  v2.02!Installationsroutine der PostScript-Schriften verbessert%
}
%
Das \TUDScript-Bundle ist seit der Version~v2.01~-- aufgrund lizenzrechtlicher 
Bedingungen \emph{ohne} die geschützten Schriften \Univers und \DIN~-- im 
\foreignlanguage{english}{%
  \hrfn{http://www.ctan.org/}{Comprehensive TeX Archive Network (CTAN)}
} zu finden und kann dadurch die aktuellen \hologo{LaTeX}"=Distributionen wie 
\Distribution{\hologo{TeX}~Live}[2014], \Distribution{Mac\hologo{TeX}}[2014] 
oder auch \Distribution{\hologo{MiKTeX}}[2.9] genutzt werden. Es besteht 
momentan aus den drei Hauptklassen \Class{tudscrbook}, \Class{tudscrreprt} 
sowie \Class{tudscrartcl}~-- dokumentiert in \autoref{sec:mainclasses}~-- und 
sowohl mit den \TUDScript-Klassen assoziierten als auch eigenständigen Paketen, 
welche in \autoref{sec:bundle} beschrieben sind.

Zur problemlosen Verwendung des \TUDScript-Bundles ist~-- neben \KOMAScript{} in
der Version~\vKOMAScript und den in \autoref{sec:packages:needed} aufgeführten 
\hologo{LaTeX}-Paketen~-- lediglich eine Installation der PostScript"=Schriften 
des \CDs der \TnUD notwendig. Diese müssen über das Universitätsmarketing auf 
\hrfn{http://tu-dresden.de/service/publizieren/cd/1_basiselemente/03_hausschrift/schriftbestellung.html}%
{Anfrage} mit dem Hinweis auf die Verwendung von \hologo{LaTeX} bestellt 
werden. Sobald Sie die notwendigen Archive \File{Univers\_PS.zip} und 
\File{DIN\_Bd\_PS.zip} erhalten haben, können die Schriften für Windows 
(\autoref{sec:install:fonts:win}) beziehungsweise unixoide Betriebssysteme 
(\autoref{sec:install:fonts:unix}) installiert werden. Die benötigten Skripte 
werden als \hrfn{https://github.com/tud-cd/tudscr/releases/tag/fonts}{Release} 
im \GitHubRepo* bereitgestellt.%
\footnote{%
  Das Einbinden von installierten Systemschriften im Open-Type-Format mit dem 
  Paket \Package{fontspec} für \hologo{LuaLaTeX} oder \hologo{XeLaTeX} wird 
  mittlerweile zwar unterstützt, empfehlenswert ist diese Variante allerdings 
  nur bedingt. Genaueres dazu in \autoref{sec:fonts:fontspec}.%
}
Dort sind auch die Quelldateien von \TUDScript und der Installationsskripte zu 
finden.

\Attention{%
  Wurde \TUDScript in einer früheren Ausführung als lokale Nutzerversion 
  installiert oder soll es in der Version \vTUDScript{} als solche genutzt
  werden, so sei auf \autoref{sec:install:ext} verwiesen.%
}

\minisec{Anmerkung zu Windows}
Sollte Windows genutzt werden und noch keine \hologo{LaTeX}"=Distribution auf 
ihrem System installiert sein, so rate ich persönlich zur Verwendung von 
\Distribution{\hologo{TeX}~Live}|?| statt \Distribution{\hologo{MiKTeX}}|?|. 
Der Vorteil ist, dass diese Distribution von mehreren Autoren gewartet wird, 
Updates von Paketen und Klassen auf CTAN meist schneller verfügbar sind und 
zusätzlich ein \textsc{Perl}"=Interpreter sowie \textsc{Ghostscript} 
mitgeliefert werden, welche die Ad"=hoc"=Verwendung einiger 
\hologo{LaTeX}"=Pakete wie beispielsweise \Package{glossaries} vereinfacht 
beziehungsweise verbessert.

\minisec{Anmerkung zu Linux und OS~X}
Nach dem gegebenenfalls notwendigen Entpacken eines heruntergeladenen Archivs
\emph{müssen} Installationsskripte für unixartigen Betriebssystemen über das 
Terminal ausgeführt werden. Nachdem dieses geöffnet wurde, sollte in diesem zum 
entsprechenden Pfad (beispielsweise \Path{cd Downloads/\PName{Unterordner}}) 
navigiert werden. Danach können sämtliche Skripte direkt mit der Verwendung von
\Path{bash \PName{Skript}.sh} aus dem Terminal ausgeführt werden.


\subsection{Installation der PostScript-Schriften unter Windows}
\label{sec:install:fonts:win}
\index{Installation!Schriften}
Zur Installation der Schriften des \CDs für das \TUDScript-Bundle ist das Archiv
\hrfn{https://github.com/tud-cd/tudscr/releases/download/fonts/TUD-KOMA-Script_fonts_Windows.zip}%
{\File*{TUD-KOMA-Script\_fonts\_Windows.zip}} vorgesehen. Dieses ist sowohl für 
\Distribution{\hologo{TeX}~Live} als auch \Distribution{\hologo{MiKTeX}} 
nutzbar und enthält~-- bis auf die Schriftdateien selbst~-- alle benötigten 
Dateien. Diese sollten nach dem Entpacken des Archivs in das gleiche 
Verzeichnis kopiert werden. Vor der Verwendung des Skripts 
\File{tudscrfonts\_install.bat} sollte sichergestellt werden, dass sich 
\emph{alle} der folgenden Dateien im selben Verzeichnis befinden:
%
\settowidth\tempdim{\File{tudscrfonts\_install.bat}}%
\begin{description}[labelwidth=\tempdim,labelsep=1em]
  \item[\File{tudscrfonts\_install.bat}]Installationsskript
  \item[\File{Univers\_PS.zip}]Archiv mit Schriftdateien für \Univers
  \item[\File{DIN\_Bd\_PS.zip}]Archiv mit Schriftdateien für \DIN
  \item[\File{tudscrfonts.zip}]Archiv mit Metriken für die
    Schriftinstallation via \Package{fontinst}
  \item[\File{7za.exe}]Stand-Alone-Version von 7-zip zum Entpacken der Archive%
    \footnote{%
      Windows stellt keine Bordmittel zum Extrahieren von Archiven auf 
      Kommandozeilen-/Skript-Ebene zur Verfügung.%
    }%
\end{description}
%
Beim Ausführen des Installationsskripts werden alle Schriften in das lokale 
Nutzerverzeichnis der jeweiligen Distribution installiert, falls kein anderes 
Verzeichnis explizit angegeben wird.

\minisec{Anmerkung zu \ifdin{TeX~Live}{\hologo{TeX}~Live}}
Sollte das Installationsscript den Befehl \File{tftopl} nicht finden, so mit dem
\ifdin{TeX~Live}{\hologo{TeX}~Live} Manager das Paket \Package{fontware}
installieren.

Sollte das Installationsskript fehlerfrei durchlaufen, die Schriften dennoch 
nicht verfügbar sein, so kann man mit \Path{updmap-sys -{}-syncwithtrees} 
die Synchronisierung aller Schriftdateien anstoßen. Anschließend sollte man 
noch \Path{updmap-sys -{}-force} aufrufen. Sind die Schriften danach immer noch 
nicht verfügbar, so wurden auf dem System bestimmt schon andere Schriften lokal 
installiert. In diesem Fall sollte man den Vorgang noch einmal für lokale 
Schriften mit \Path{updmap -{}-syncwithtrees} und \Path{updmap -{}-force} 
ausführen. Dies hat jedoch zur Folge, dass der Befehl \Path{updmap-sys} von nun 
an wirkungslos bleibt und auch in Zukunft bei der globalen Installation neuer 
Schriften diese mit \Path{updmap} lokal registriert werden müssen.

\minisec{Anmerkung zu \ifdin{MiKTeX}{\hologo{MiKTeX}}}
Für den Fall, dass \Distribution{\hologo{MiKTeX}} verwendet wird, ist sehr 
ratsam, das \TUDScript-Bundle~-- wie sämtliche manuell installierte Pakete und 
Schriftarten auch~-- nicht in das Standardnutzerverzeichnis oder gar in den
Pfad der \Distribution{\hologo{MiKTeX}}"=Distribution selbst sondern in einen 
separaten Ordner zu installieren und diesen bei \Distribution{\hologo{MiKTeX}} 
als lokalen \Path{texmf}-Baum anzumelden. Das mitgelieferte Installationsskript 
für diesen Schritt automatisiert aus. Am besten ist, den voreingestellten 
Installationspfad zu verwenden.

Es kann vorkommen, dass die für den Schriftinstallationsprozess notwendigen 
Pakete \Package{fontinst}, \Package{cmbright} sowie \Package{iwona} noch nicht 
installiert sind. Ist die automatische Nachinstallation fehlender Pakete 
aktiviert, so reicht es im Normalfall, nach einem ersten vollständigen 
Durchlauf das Skript abermals zu starten. Andernfalls müssen diese Pakete 
manuell über den Paketmanager installiert werden.

Das Installationsskript scheitert außerdem bei einigen Anwendern~-- aufgrund 
eingeschränkter Nutzerzugriffsrechte~-- beim Eintragen der Schriften in die 
Map-Datei. Dies muss gegebenenfalls durch den Nutzer über die Kommandozeile 
\Path{initexmf -{}-edit-config-file updmap} erfolgen. In der sich öffnenden 
Datei sollte sich der Eintrag \Path{Map tudscr.map} befinden. Ist dies nicht 
der Fall, ist diese Zeile manuell einzutragen und die Datei zu speichern. 
Danach muss in der Kommandozeile noch \Path{initexmf -{}-mkmaps} ausgeführt 
werden.


\subsection{Installation der PostScript-Schriften unter Linux und OS~X}
\label{sec:install:fonts:unix}
\index{Installation!Schriften}
Für die Erstellung des Installationsskripts für Linux und OS~X geht mein Dank 
an Jons-Tobias Wamhoff, welcher sich für die erstmalige Portierung des Skripts 
von Windows zu unixartigen Systemen freiwillig zur Verfügung stellte.
Zur Installation der Schriften des \CDs für das \TUDScript-Bundle ist das Archiv
\hrfn{https://github.com/tud-cd/tudscr/releases/download/fonts/TUD-KOMA-Script_fonts_Unix.zip}%
{\File*{TUD-KOMA-Script\_fonts\_Unix.zip}} vorgesehen. Dieses ist sowohl für 
\Distribution{\hologo{TeX}~Live} als auch \Distribution{Mac\hologo{TeX}} 
nutzbar und enthält~-- bis auf die Schriftdateien selbst~-- alle benötigten 
Dateien. Diese sollten nach dem Entpacken des Archivs in das gleiche 
Verzeichnis kopiert werden. Vor der Verwendung des Skripts 
\File{tudscrfonts\_install.sh} sollte sichergestellt werden, dass sich 
\emph{alle} der folgenden Dateien im selben Verzeichnis befinden:
%
\settowidth\tempdim{\File{tudscrfonts\_install.sh}}%
\begin{description}[labelwidth=\tempdim,labelsep=1em]
  \item[\File{tudscrfonts\_install.sh}]Installationsskript
    (Terminal: \Path{bash tudscrfonts\_install.sh})
  \item[\File{Univers\_PS.zip}]Archiv mit Schriftdateien für \Univers
  \item[\File{DIN\_Bd\_PS.zip}]Archiv mit Schriftdateien für \DIN
  \item[\File{tudscrfonts.zip}]Archiv mit Metriken für die
    Schriftinstallation via \Package{fontinst}
\end{description}
%
Beim Ausführen des Installationsskripts werden alle Schriften in das lokale 
Nutzerverzeichnis der jeweiligen Distribution installiert.


\subsection{Probleme bei der Installation der PostScript-Schriften}
Treten bei der Installation wider Erwarten Probleme auf, so sollte eine 
Logdatei erstellt werden. Unter Windows muss das Skript, welches Probleme 
verursacht, aus der Kommandozeile mit
\Path{\PName{Skript}.bat > \PName{Skript}.log} aufgerufen werden, wobei das 
doppelte Betätigen der Eingabetaste nötig ist. Für unixartige Systeme 
ist der Aufruf \Path{bash \PName{Skript}.sh > \PName{Skript}.log} aus dem 
Terminal heraus zu verwenden. Die erstellte Logdatei kann mit einer kurzen 
Fehlerbeschreibung direkt an \Email{\tudscrmail} gesendet werden.



\section{Schnelleinstieg}
Das Handbuch gliedert sich in drei Teile. In \autoref{part:main} ist die 
Dokumentation von \TUDScript zu finden. Hier werden alle neuen Optionen, 
Umgebungen und Befehle, die über die Funktionalität von \KOMAScript{} 
hinausgehen, erläutert. \autoref{part:additional} enthält zum einen einfache 
Minimalbeispiele, um den prinzipiellen Umgang und die Funktionalitäten von 
\TUDScript zu demonstrieren. Zum anderen werden hier auch ausführliche und 
dokumentierte Tutorials vor allem für \hologo{LaTeX}-Neulinge angeboten. 
Insbesondere das Tutorial \Tutorial{treatise} ist mehr als einen Blick wert, 
wenn eine wissenschaftliche Arbeit mit \hologo{LaTeXe} verfasst werden soll.
Abschließend werden verschiedenste Pakete vorgestellt, die nicht speziell für 
das \TUDScript-Bundle selber sondern auch für andere \hologo{LaTeX}-Klassen
verwendet werden können und demzufolge für alle \hologo{LaTeX}-Anwender 
interessant sein könnten. Außerdem werden hier einige Tipps \& Tricks beim 
Umgang mit \hologo{LaTeX} beschrieben, um kleinere oder größere Probleme zu 
lösen.

Die Klassen \Class{tudscrbook}, \Class{tudscrreprt} und \Class{tudscrartcl} 
sind Wrapper"=Klassen der bekannten \KOMAScript-Klassen \Class{scrbook}, 
\Class{scrreprt} sowie \Class{scrartcl} und können einfach anstelle deren 
verwendet werden. Auf diesen basierende Dokumente können durch das Umstellen 
der Dokumentklasse einfach in das \CD der \TnUD überführt werden. Bei 
Fragestellungen bezüglich Layout, Schriften oder ähnlichem ist in jedem Fall 
ein weiterer Blick in das hier vorliegende Handbuch empfehlenswert.
